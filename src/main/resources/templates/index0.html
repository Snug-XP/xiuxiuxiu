<!DOCTYPE html>
<html lang="en" xmlns:th=http://www.thymeleaf.org>
<head>
<script type="application/x-javascript">
        addEventListener("load", function () {
            setTimeout(hideURLbar, 0);
        }, false);

        function hideURLbar() {
            window.scrollTo(0, 1);
        }
</script>
<link href="/css/index.css" rel="stylesheet" type="text/css" media="all" />
<script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>	
<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
<!--BootStrap Table-->
<link href="https://cdn.staticfile.org/bootstrap-table/1.13.5/bootstrap-table.min.css" rel="stylesheet">
<script src="https://cdn.staticfile.org/bootstrap-table/1.13.5/bootstrap-table.min.js"></script>
</head>
<body>
<div th:replace="manager/Mnav :: mnavbar"></div>
<div class="container">
      <ul id="formTab" class="nav nav-tabs" role="tablist">
        <li class="nav-item"><a class="hvr-underline-from-center"
          data-toggle="tab" href="#table-content">检索预约零件名单</a></li>
        <li><a class="hvr-underline-from-center" data-toggle="tab"
          href="#excel-import">导入预约零件名单</a></li>
      </ul>

      <div class="tab-content">

        <div class="table-responsive tab-pane active" id="table-content">
          <table class="table" id="ViewTable"></table>
        </div>
        
<table id="mytable"></table>
        
       
        
</body>
<!--在初始化table之前引入中文脚本-->
<script src="https://cdn.staticfile.org/bootstrap-table/1.13.5/locale/bootstrap-table-zh-CN.min.js"></script>
<script>
    $(document).ready(function () {
        $("#mytable").bootstrapTable({
            url:"/reservation/getAll",   					//请求地址
            toolbar : '#toolbar',               //工具按钮用哪个容器
            data_local : "zh-US" ,				//表格汉化
            striped : true, 					//是否显示行间隔色
            pageNumber : 1, 					//初始化加载第一页
            pagination : true,					//是否分页
            sidePagination : 'server',			//server:服务器端分页|client：前端分页
            pageSize : 4,						//单页记录数
            //minimumCountColumns : 2,            //最少允许的列数
            clickToSelect : true,               //是否启用点击选中行
            sortStable : true,					//是否可排序
            strictSearch : false,               //设置为 true启用 全匹配搜索，否则为模糊搜索
            pageList : [ 2, 3, 5,'ALL'],		//可选择单页记录数
            search: true,						//表格搜索按钮
            showRefresh : true,					//刷新按钮
            //queryParamsType:'', 				//默认值为 'limit' ,在默认情况下 传给服务端的参数为：offset,limit,sort
           										// 设置为 ''  在这种情况下传给服务器的参数为：pageSize,pageNumber
            queryParams : function(params) {	//上传服务器的参数 //params的自带参数类型由queryParamsType决定
                var temp = {
                		offset: params.offset,   					 //起始
                		limit: params.limit,                         //页面大小
                };
                return temp;
            },
            columns : [ {
                title: '序号',
                field: '',
                align: 'center',
                formatter: function (value, row, index) {
                    return index+1;
                }
            },{
                title : '姓名',
                field : 'student.name',
                align: 'center',
                sortable : true
            },{
              title : '学号',
              field : 'student.studentId',
              align: 'center',
              sortable : true
            },{
              title : '联系电话',
              field : 'student.phoneNumber',
              align: 'center'
            },{
              title : '预约类型',
              field : 'applicationType',
              align: 'center',
              sortable : true,
              formatter: function (value, row, index) {
                    return row.applicationType == 0 ? '活动预约' : '上门服务';
              }
            },{
              title : '场次',
              field : 'requiredTime',
              align: 'center',
              sortable : true
            },{
              title : '零件类型',
              field : 'componentList.type',
              align: 'center',
              sortable : true
            },{
              title : '是否完成',
              align: 'center',
              field : 'state',
              formatter: function (value, row, index) {
                var state;
                if (row.state == 2) {
                  state = '已完成';//还有一个active
                    }
                    else if (row.state == 1) {
                      state = '已受理,未完成';
                    }
                    else if (row.state == 0) {
                      state = '未受理';
                    }
                return state;
                }
            },{
              title : '详情',
              align: 'center',
              field : 'detail',
              formatter: function (value, row, index) {
                return '<a href="makeReservation?method=getForID&id='+row.id+'" class="view resw3">详情</a>';
              }
            }]
        })
    })
</script>
<!-- 预约零件搜索的表单：结束 -->

  
  <!-- //password-script -->
</html>