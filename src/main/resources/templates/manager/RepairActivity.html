<!DOCTYPE html>
<html lang="zxx" xmlns:th="http://www.thymeleaf.org">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>维修场次管理</title>

<script type="application/x-javascript">
	
	

	
	 addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false);
		function hideURLbar(){ window.scrollTo(0,1); } 



</script>

<link th:href="@{/css/index.css}" rel="stylesheet" type="text/css">
<link th:href="@{/css/3.3.7-bootstrap.min.css}" rel="stylesheet"
	type="text/css">
<script th:src="@{/js/my/2.1.1-jquery.min.js}"></script>
<script th:src="@{/js/my/3.3.7-bootstrap.min.js}"></script>


</head>

<body>
	<!-- banner -->
	<div th:replace="manager/Mnav :: mnavbar"></div>
	<div class="agileits_w3layouts_banner_nav">


		<div class="clearfix"></div>
	</div>

	<div class="services">
		<div class="container">
			<h3 class="tittle_agile_w3">维修场次列表</h3>
			<ul class="agile_forms">

				<li><a class="agile_forms" href="#" data-toggle="modal"
					data-target="#myModal1" th:onclick="CurrentTime()" >增加维修场次</a></li>
			</ul>
			<div class="heading-underline">
				<div class="h-u1"></div>
				<div class="h-u2"></div>
				<div class="h-u3"></div>
				<div class="clearfix"></div>
			</div>

			<div class="w3l-news_info_agile_its">

				<div th:each="activity,iterStat : ${activityList}">

					<div class="media response-info">
						<div class="media-body response-text-right">
							<h5 th:text="${activity.place}"></h5>
							<ul>
								<li><i th:text="${activity.time}" class="fa fa-calendar"
									aria-hidden="true"></i></li>
								<li><i th:text="'预约人数 :'+ ${activity.pnumber}"
									class="fa fa-users" aria-hidden="true"></i></li>
							</ul>
							<p>服务同学、建设校园</p>
							<div class="read">
								<a href="#" class="view resw3" data-toggle="modal"
									th:attr="data-target='#myModal4'"
									th:onclick="'setTargetID('+${activity.id}+'),CurrentTime()'"
									>修改</a> <a
									href="#" class="view resw3" data-toggle="modal"
									th:attr="data-target='#myModal5'"
									th:onclick="'setTargetID('+${activity.id}+')'">删除</a>
							</div>
						</div>
						<div class="clearfix"></div>
					</div>


				</div>
			</div>

		</div>
	</div>
	<!-- //typo -->
	<!-- footer -->
	<!-- //footer -->
	<!-- menu -->
	<!-- js -->

	<script type="text/javascript" th:src="@{/js/jquery-2.1.4.min.js}"></script>
	<script type="text/javascript"
		th:src="@{/js/modernizr.custom.46884.js}"></script>

	<!-- 由session判断是否登录成功 -->
	<!-- <%if (session.getAttribute("name")==null){%> -->
	<script type="text/javascript">
		// 	jQuery(document).ready(function($) {
		// 		$("#exit").toggle( 
		// 				  function () {
		// 				    $(this).hide();
		// 				  }
		// 				);
		// 	});
	</script>
	<!--   <%}else {%> -->
	<script type="text/javascript">
		// 	jQuery(document).ready(function($) {
		// 		$("#login").toggle( 
		// 				  function () {
		// 				    $(this).hide();
		// 				  }
		// 				);
		// 		$("#register").toggle( 
		// 				  function () {
		// 				    $(this).hide();
		// 				  }
		// 				);
		// 	});
	</script>
	<!--   <%}%> -->

	<!-- for bootstrap working -->

	<!-- //for bootstrap working -->
	<!-- start-smoth-scrolling -->
	<script type="text/javascript" th:src="@{/js/move-top.js}"></script>
	<script type="text/javascript" th:src="@{/js/easing.js}"></script>
	<script type="text/javascript">
		jQuery(document).ready(function($) {
			$(".scroll").click(function(event) {
				event.preventDefault();
				$('html,body').animate({
					scrollTop : $(this.hash).offset().top
				}, 1000);
			});
		});
	</script>
	<!-- start-smoth-scrolling -->
	<!-- here stars scrolling icon -->
	<script type="text/javascript">
		$(document).ready(function() {
			/*
				var defaults = {
				containerID: 'toTop', // fading element id
				containerHoverID: 'toTopHover', // fading element hover id
				scrollSpeed: 1200,
				easingType: 'linear' 
				};
			 */

			$().UItoTop({
				easingType : 'easeOutQuart'
			});

		});
	</script>
	<!-- //here ends scrolling icon -->
	<div class="modal fade" id="myModal1" tabindex="-1" role="dialog">
		<div class="modal-dialog">
			<!-- Modal content-->
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>

					<div class="signin-form profile">
						<h3 class="agileinfo_sign">增加维修场次</h3>						
							<form th:action="@{/manager/AddActivity}" method="post">
							<div class="login-form">
								<div  class="form-group">
									<label  style="margin-top:1em;" class="col-sm-3">开始时间:</label>
									<div class="col-sm-9">
										<input id="add-form-begin-time" style="margin-top:1em;" type="datetime-local" min="" name="begin_time" 
											required="required">
									</div>
								</div>
								<div   class="form-group">
									<label  style="margin-top:1em;" class="col-sm-3">结束时间:</label>
									<div class="col-sm-9">
										<input id="add-form-end-time" style="margin-top:1em;" type="datetime-local"  min="" name="end_time" 
											required="required">
									</div>
								</div>
								<div  class="form-group">
									<label style="margin-top:1em;" class="col-sm-3">地点:</label>
									<div class="col-sm-9">
										<input style="margin-top:1em;" type="text" name="place" placeholder="地点" required="required">
									</div>
								</div>
<!-- 								<input type="text" name="place" placeholder="地点" required="required"> -->
							
						</div>

						<input type="submit" value="确定">
						</form>
					</div>
<!-- 						<input type="text" name="begin_time" placeholder="开始时间" -->
<!-- 							required="required">  -->
<!-- 							<input type="text" name="end_time" -->
<!-- 							placeholder="结束时间" required="required">  -->
<!-- 							<input -->
<!-- 							type="text" name="place" placeholder="地点" required="required"> -->
<!-- 							<input type="text" name="place" placeholder="地点" required="required"> -->
				</div>
			</div>
		</div>
	</div>
	</div>

	<!-- //Modal -->
	<div class="modal fade" th:id="myModal5" tabindex="-1" role="dialog">
		<div class="modal-dialog">
			<!-- Modal content-->
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>

					<div class="signin-form profile">
						<h3 class="agileinfo_sign">是否删除该维修场次？</h3>
						<div class="login-form">
							<form th:action="@{/manager/DeleteActivity}" method="post">

								<input id="delete-input-id" type="hidden" name="id"> <input
									type="submit" value="确定">
							</form>
						</div>

					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" th:id="myModal4" tabindex="-1" role="dialog">
		<div class="modal-dialog">
			<!-- Modal content-->
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>

					<div class="signin-form profile">
						<h3 class="agileinfo_sign">修改维修场次</h3>

						<div class="login-form">
						<form th:action="@{/manager/UpdateActivity}" method="post">
							<div class="login-form">
								<input id="update-input-id" type="hidden" name="id">
								<div  class="form-group">
									<label  style="margin-top:1em;" class="col-sm-3">开始时间:</label>
									<div class="col-sm-9">
										<input id="update-form-begin-time" style="margin-top:1em;" type="datetime-local"  min="" name="begin_time" 
											required="required">
									</div>
								</div>
								<div   class="form-group">
									<label  style="margin-top:1em;" class="col-sm-3">结束时间:</label>
									<div class="col-sm-9">
										<input id="update-form-end-time" style="margin-top:1em;" type="datetime-local"  min="" name="end_time" 
											required="required">
									</div>
								</div>
								<div  class="form-group">
									<label style="margin-top:1em;" class="col-sm-3">地点:</label>
									<div class="col-sm-9">
										<input style="margin-top:1em;" type="text" name="place" placeholder="地点" required="required">
									</div>
								</div>
<!-- 								<input type="text" name="place" placeholder="地点" required="required"> -->
							
						</div>

						<input  type="submit" value="确定">
						</form>
<!-- 							<form th:action="@{/manager/UpdateActivity}" method="post"> -->
<!-- 								<input id="update-input-id" type="hidden" name="id"> <input -->
<!-- 									type="text" name="begin_time" placeholder="开始时间" -->
<!-- 									required="required"> <input type="text" name="end_time" -->
<!-- 									placeholder="结束时间" required="required"> <input -->
<!-- 									type="text" name="place" placeholder="地点" required="required"> -->
<!-- 								<input type="submit" value="确定"> -->
<!-- 							</form> -->
						</div>

					</div>

				</div>
			</div>
		</div>
	</div>

	<script type="text/javascript">
		//点击按钮设置目标id
		function setTargetID(id) {
			document.getElementById("delete-input-id").value = id;
			document.getElementById("update-input-id").value = id;
		}
	</script>

	<script type="text/javascript">
	function CurrentTime()
    { 
        var now = new Date();
       
        var year = now.getFullYear();       //年
        var month = now.getMonth() + 1;     //月
        var day = now.getDate();            //日
       
        var hh = now.getHours();            //时
        var mm = now.getMinutes();          //分
       
        var clock = year + "-";
       
        if(month < 10)
            clock += "0";
       
        clock += month + "-";
       
        if(day < 10)
            clock += "0";
           
        clock += day + "T";
       
        if(hh < 10)
            clock += "0";
           
        clock += hh + ":";
        if (mm < 10) clock += '0'; 
        clock += mm; 
        document.getElementById("add-form-begin-time").min =clock;
        document.getElementById("add-form-end-time").min =clock;
        document.getElementById("update-form-begin-time").min =clock;
        document.getElementById("update-form-end-time").min =clock;
    } 
	</script>
	<div th:replace="home/messageOrErr :: messageOrErr"></div>
</body>
</html>